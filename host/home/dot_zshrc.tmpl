# .zshrc
# Generated by chezmoi

# Path to your oh-my-zsh installation
export ZSH="$HOME/.oh-my-zsh"

# Set name of the theme to load
ZSH_THEME="robbyrussell"

# Plugins
plugins=(
  # Default plugins
  {{ template "defaults/zsh/plugins.tmpl" . }}
  
  # Environment-specific plugins
  {{ if eq .hostEnvironment "macos" -}}
  {{ template "environments/macos/zsh/plugins.tmpl" . }}
  {{ else if eq .hostEnvironment "linux-debian" -}}
  {{ template "environments/linux/zsh/plugins.tmpl" . }}
  {{ else if eq .hostEnvironment "linux-arch" -}}
  {{ template "environments/linux/zsh/plugins.tmpl" . }}
  {{ end -}}
)

# Load Oh My Zsh
source $ZSH/oh-my-zsh.sh

# Helper function to source files if they exist
source_if_exists() {
  [ -f "$1" ] && source "$1"
}

# Load default configuration
{{ template "defaults/zsh/configuration.tmpl" . }}

# Environment-specific configuration
{{ if eq .hostEnvironment "macos" -}}
{{ template "environments/macos/zsh/configuration.tmpl" . }}
{{ else if eq .hostEnvironment "linux-debian" -}}
{{ template "shared/linux/zsh/configuration.tmpl" . }}
{{ template "environments/linux/zsh/configuration.tmpl" . }}
{{ else if eq .hostEnvironment "linux-arch" -}}
{{ template "shared/linux/zsh/configuration.tmpl" . }}
{{ template "environments/linux/zsh/configuration.tmpl" . }}
{{ end -}}

# Add local bin to PATH
export PATH="$HOME/.local/bin:$PATH"

# Default aliases
{{ template "defaults/zsh/aliases.tmpl" . }}

# Environment-specific aliases
{{ if eq .hostEnvironment "macos" -}}
{{ template "environments/macos/zsh/aliases.tmpl" . }}
{{ else if eq .hostEnvironment "linux-debian" -}}
{{ template "environments/linux/zsh/aliases.tmpl" . }}
{{ else if eq .hostEnvironment "linux-arch" -}}
{{ template "environments/linux/zsh/aliases.tmpl" . }}
{{ end -}}

# Starship prompt if installed
if command -v starship &> /dev/null; then
  eval "$(starship init zsh)"
fi
