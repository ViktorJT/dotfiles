# .zshrc
# Generated by chezmoi

# Path to your oh-my-zsh installation
export ZSH="$HOME/.oh-my-zsh"

# Set name of the theme to load
ZSH_THEME="robbyrussell"

# Helper function to source files if they exist
source_if_exists() {
  [ -f "$1" ] && source "$1"
}

# Plugins
plugins=(
  # Default plugins
  {{ template "defaults/shell/plugins.tmpl" . }}
  
  # Environment-specific plugins
  {{ if eq .hostEnvironment "macos" -}}
  {{ template "macos/shell-plugins.tmpl" . }}
  {{ else if eq .hostEnvironment "linux-debian" -}}
  {{ template "linux/debian/shell-plugins.tmpl" . }}
  {{ else if eq .hostEnvironment "linux-arch" -}}
  {{ template "linux/arch/shell-plugins.tmpl" . }}
  {{ end -}}
)

# Load Oh My Zsh
source $ZSH/oh-my-zsh.sh

# Load default configuration
{{ template "defaults/shell/configuration.tmpl" . }}

# Environment-specific configuration
{{ if eq .hostEnvironment "macos" -}}
{{ template "macos/shell-configuration.tmpl" . }}
{{ else if eq .hostEnvironment "linux-debian" -}}
{{ template "shared/linux/shell-configuration.tmpl" . }}
{{ template "linux/debian/shell-configuration.tmpl" . }}
{{ else if eq .hostEnvironment "linux-arch" -}}
{{ template "shared/linux/shell-configuration.tmpl" . }}
{{ template "linux/arch/shell-configuration.tmpl" . }}
{{ end -}}

# Add local bin to PATH
export PATH="$HOME/.local/bin:$PATH"

# Default aliases
{{ template "defaults/shell/aliases.tmpl" . }}

# Environment-specific aliases
{{ if eq .hostEnvironment "macos" -}}
{{ template "macos/shell-aliases.tmpl" . }}
{{ else if eq .hostEnvironment "linux-debian" -}}
{{ template "linux/debian/shell-aliases.tmpl" . }}
{{ else if eq .hostEnvironment "linux-arch" -}}
{{ template "linux/arch/shell-aliases.tmpl" . }}
{{ end -}}

# Starship prompt if installed
if command -v starship &> /dev/null; then
  eval "$(starship init zsh)"
fi
